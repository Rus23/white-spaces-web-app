<div class="admin-order-dialog">
  <div
    fxLayout="row"
    fxLayoutAlign="space-around center"
    fxLayoutGap="15.625vw"
  >
    <div
      fxLayout="column"
      fxLayoutAlign="space-around start"
      fxLayoutGap=".26vw"
    >
      <h2 mat-dialog-title>Order No. {{ this.data.id }}</h2>
      <span
        >Client: <b>{{ this.data.customer }}</b>
      </span>
      <span>Email: <b>todo</b></span>
      <span
        >Package and Add ons:
        <b *ngFor="let product of this.data.orderDetails.product">{{
          product.name
        }}</b></span
      >
      <span>Add ons: <b>todo</b></span>
    </div>

    <div fxLayout="column" fxLayoutAlign="start start" fxLayoutGap="15px">
      <div>
        <a (click)="this.downloadProject()">Download project &darr;</a>
      </div>
      <mat-form-field appearance="fill">
        <mat-label>Status</mat-label>
        <mat-select (selectionChange)="this.handleSelect($event.value)">
          <mat-option *ngFor="let status of statusArray" [value]="status.value">
            {{ status.viewValue }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  <mat-dialog-content class="mat-typography">
    <mat-tab-group mat-align-tabs="center">
      <mat-tab label="Floor Plan">
        <div *ngFor="let order of this.data.orderDetails">
          <div
            *ngIf="order.additional_data?.floor_plan"
            fxLayout="column"
            fxLayoutAlign="start center"
            fxLayoutGap="30px"
          >
            <img
              src="{{ order.additional_data?.floor_plan }}"
              alt="Floor Plan"
              width="80%"
            />
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Photos">
        <div *ngFor="let order of this.data.orderDetails">
          <div
            *ngIf="order.additional_data?.images?.length"
            fxLayout="column"
            fxLayoutAlign="start center"
            fxLayoutGap="30px"
          >
            <img
              *ngFor="let img of order.additional_data.images"
              src="{{ img }}"
              width="80%"
              alt=""
            />
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Questionnaire">
        <div *ngFor="let order of this.data.orderDetails">
          <span class="admin-order-dialog--title">
            <b>{{ order.product.name }}</b>
          </span>
          <div *ngFor="let question of order.additional_data.questions">
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title> {{ question.question }} </mat-panel-title>
              </mat-expansion-panel-header>

              <div
                fxLayout="column"
                fxLayoutAlign="start center"
                fxLayoutGap="30px"
              >
                <span>Section: {{ question.section }}</span>
                <span>Client Anwser: {{ question.answer }}</span>
                <div *ngIf="question.images !== null && question.images !== []">
                  <img
                    *ngFor="let img of question.images"
                    src="{{ img }}"
                    alt=""
                    class="admin-orders__img"
                  />
                </div>
              </div>
            </mat-expansion-panel>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </mat-dialog-content>
</div>
